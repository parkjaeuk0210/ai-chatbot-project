<!DOCTYPE html>
<html lang="ko" dir="ltr">
<head>
    <title>페라 – 무료 AI 채팅앱</title>
    <meta name="description" content="페라는 최신 AI 모델을 이용한 내맘대로 만드는 실시간 챗봇 서비스입니다.">
    <meta name="google-site-verification" content="69vBy7QiAiBCp1GXYwYh3Ia5c7Hk0wl113WbW2xjzOg" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <!-- Remove Tailwind CDN for production build -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Preload critical resources -->
    <link rel="modulepreload" href="/assets/main.COt_ucC-.js">
    <link rel="modulepreload" href="/assets/app.kstOcCKh.js">
    <link rel="modulepreload" href="/assets/lazyLoader.BYAS4K2E.js">
    <!-- PDF.js will be lazy loaded when needed -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Performance CSS -->
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/assets/manifest.D8HVBIFR.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="FERA">
    <link rel="apple-touch-icon" href="/assets/icon.DwmOqphf.svg">
    <meta name="theme-color" content="#3b82f6">
    <style>
        :root {
            --bg-gradient-start: #f0f9ff;
            --bg-gradient-end: #e0f2fe;
            --glass-bg: rgba(255, 255, 255, 0.5);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-primary: #1e293b;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --shadow-color: rgba(59, 130, 246, 0.1);
        }
        
        [data-theme="dark"] {
            --bg-gradient-start: #0f172a;
            --bg-gradient-end: #1e293b;
            --glass-bg: rgba(30, 41, 59, 0.5);
            --glass-border: rgba(71, 85, 105, 0.2);
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --shadow-color: rgba(0, 0, 0, 0.3);
        }
        
        body {
            font-family: 'Noto Sans KR', 'Inter', sans-serif;
            background: linear-gradient(120deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
            overflow: hidden;
            transition: background 0.3s ease;
            margin: 0;
            padding: 0;
        }
        .glass-effect {
            background: var(--glass-bg);
            -webkit-backdrop-filter: blur(20px);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            transition: background 0.3s ease, border 0.3s ease;
        }
        
        /* 다크 모드 텍스트 색상 */
        h1, h2, h3, p, span, button {
            color: var(--text-primary);
            transition: color 0.3s ease;
        }
        
        .text-slate-800 { color: var(--text-primary) !important; }
        .text-slate-700 { color: var(--text-primary) !important; }
        .text-slate-600 { color: var(--text-secondary) !important; }
        .text-slate-500 { color: var(--text-muted) !important; }
        
        [data-theme="dark"] .bg-white\/80,
        [data-theme="dark"] .bg-white\/70,
        [data-theme="dark"] .bg-white\/40 {
            background: rgba(30, 41, 59, 0.8) !important;
        }
        
        [data-theme="dark"] .shadow-blue-100\/50 {
            box-shadow: 0 20px 25px -5px var(--shadow-color), 0 10px 10px -5px var(--shadow-color) !important;
        }
        
        /* 다크모드에서 페르소나 입력창 스타일 */
        [data-theme="dark"] #persona-input {
            background: rgba(51, 65, 85, 0.6) !important;
            color: var(--text-primary) !important;
            border: 1px solid rgba(148, 163, 184, 0.2);
        }
        
        [data-theme="dark"] #persona-input::-moz-placeholder {
            color: var(--text-muted) !important;
        }
        
        [data-theme="dark"] #persona-input::placeholder {
            color: var(--text-muted) !important;
        }
        
        [data-theme="dark"] #persona-input:focus {
            background: rgba(51, 65, 85, 0.8) !important;
            border-color: #3b82f6;
        }
        
        /* 다크모드에서 채팅 입력창 스타일 */
        [data-theme="dark"] #chat-input {
            background: rgba(51, 65, 85, 0.7) !important;
            color: var(--text-primary) !important;
            border: 1px solid rgba(148, 163, 184, 0.3);
        }
        
        [data-theme="dark"] #chat-input::-moz-placeholder {
            color: var(--text-muted) !important;
        }
        
        [data-theme="dark"] #chat-input::placeholder {
            color: var(--text-muted) !important;
        }
        
        [data-theme="dark"] #chat-input:focus {
            background: rgba(51, 65, 85, 0.9) !important;
            border-color: #3b82f6;
        }
        
        /* 다크모드에서 이미지 프롬프트 입력창 스타일 */
        [data-theme="dark"] #image-prompt {
            background: rgba(51, 65, 85, 0.7) !important;
            color: var(--text-primary) !important;
            border: 1px solid rgba(148, 163, 184, 0.3);
        }
        
        [data-theme="dark"] #image-prompt::-moz-placeholder {
            color: var(--text-muted) !important;
        }
        
        [data-theme="dark"] #image-prompt::placeholder {
            color: var(--text-muted) !important;
        }
        
        [data-theme="dark"] #image-prompt:focus {
            background: rgba(51, 65, 85, 0.9) !important;
            border-color: #6366f1;
        }
        
        /* 다크모드에서 입력창 영역 배경 */
        [data-theme="dark"] #chat-ui .mt-2.flex.items-center {
            background: rgba(15, 23, 42, 0.95) !important;
            border-top: 1px solid rgba(148, 163, 184, 0.1);
        }
        
        /* 다크모드에서 헤더 배경 */
        [data-theme="dark"] #main-header {
            background: rgba(15, 23, 42, 0.95) !important;
            border-bottom: 1px solid rgba(148, 163, 184, 0.2);
        }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(0, 0, 0, 0.2); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(0, 0, 0, 0.4); }
        .spinner {
            border: 3px solid rgba(0, 0, 0, 0.1);
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border-left-color: #3b82f6;
            animation: spin 1s ease infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        .content-pane, #settings-modal {
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
        }
        .content-pane {
            opacity: 0;
            transform: scale(0.98);
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
        }
        .content-pane.is-active { opacity: 1; transform: scale(1); pointer-events: auto; }
        .message-bubble { 
            animation: pop-in 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            -webkit-tap-highlight-color: transparent;
        }
        @keyframes pop-in {
            from { 
                opacity: 0; 
                transform: translateY(10px) scale(0.95); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
            }
        }
        
        /* 버튼 터치 피드백 */
        button {
            -webkit-tap-highlight-color: transparent;
            transition: transform 0.1s ease, opacity 0.1s ease;
        }
        
        button:active {
            transform: scale(0.95);
            opacity: 0.9;
        }
        
        /* 모바일 입력창 포커스 스타일 */
        @media (max-width: 640px) {
            input:focus, textarea:focus {
                outline: none;
                box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5);
            }
        }
        #file-preview-container {
            transition: all 0.3s ease;
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            margin-bottom: 0;
        }
        #file-preview-container.visible {
            max-height: 60px;
            opacity: 1;
            margin-bottom: 0.5rem;
        }
        
        /* 모바일에서 파일 미리보기 스타일 */
        @media (max-width: 640px) {
            #file-preview-container.visible {
                padding: 0 0.5rem;
            }
            
            #preview-filename {
                max-width: 150px;
            }
        }
        #settings-modal.hidden {
            opacity: 0;
            transform: scale(1.05);
            pointer-events: none;
        }
        
        /* 모바일 최적화 */
        @media (max-width: 640px) {
            .glass-effect {
                border-radius: 0;
            }
            
            .w-full.max-w-4xl {
                height: 100vh;
                height: 100dvh; /* Dynamic viewport height - 공식 해결책 */
                max-width: 100%;
                border-radius: 0;
                position: relative;
            }
            
            /* 모바일에서 헤더 고정 및 컴팩트화 */
            #main-header {
                position: sticky;
                top: 0;
                z-index: 100;
                background: var(--glass-bg);
                backdrop-filter: blur(20px);
                -webkit-backdrop-filter: blur(20px);
                padding: 0.75rem;
                transition: transform 0.3s ease;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            }
            
            /* 헤더 숨김 상태 */
            #main-header.header-hidden {
                transform: translateY(-100%);
            }
            
            /* 컴팩트 헤더 스타일 */
            #main-header h1 {
                font-size: 1.1rem;
            }
            
            #main-header .tab-button {
                padding: 0.375rem 0.75rem;
                font-size: 0.8rem;
            }
            
            #main-header button.w-9 {
                width: 2rem;
                height: 2rem;
            }
            
            #main-header button svg {
                width: 18px;
                height: 18px;
            }
            
            #chat-input {
                font-size: 16px; /* iOS 줌 방지 */
            }
            
            /* 터치 피드백 개선 */
            button {
                -webkit-tap-highlight-color: transparent;
            }
            
            /* 모바일에서 버튼 크기 증가 */
            #send-button, #file-button {
                min-width: 44px;
                min-height: 44px;
            }
            
            /* 가상 키보드 대응 */
            .content-pane {
                height: 100%;
            }
            
            /* 채팅 UI 모바일 최적화 */
            #chat-ui {
                display: flex;
                flex-direction: column;
                height: 100%;
                position: relative;
            }
            
            /* 헤더 높이만큼 채팅 영역 조정 */
            main {
                height: calc(100% - 60px); /* 헤더 높이 고려 */
            }
            
            #chat-messages {
                flex: 1;
                overflow-y: auto;
                padding-bottom: 80px;
                -webkit-overflow-scrolling: touch;
                scroll-behavior: smooth;
            }
            
            /* 입력창 영역 - 하단 고정 */
            #chat-ui .mt-2.flex.items-center {
                position: sticky;
                bottom: 0;
                left: 0;
                right: 0;
                background: var(--bg-gradient-start);
                padding: 0.5rem;
                padding-bottom: calc(0.5rem + env(safe-area-inset-bottom, 20px));
                box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                z-index: 50;
            }
            
            /* 파일 미리보기 컨테이너 */
            #file-preview-container {
                transition: all 0.3s ease;
            }
            
            #file-preview-container.visible {
                margin-bottom: 0.5rem;
            }
            
            /* 키보드가 열렸을 때 조정 */
            .keyboard-open #chat-messages {
                padding-bottom: 20px;
                transition: padding-bottom 0.3s ease;
            }
            
            /* 메시지 버블 터치 피드백 */
            .message-bubble {
                -webkit-tap-highlight-color: transparent;
                transition: transform 0.1s ease;
            }
            
            .message-bubble:active {
                transform: scale(0.98);
            }
        }
        
        /* 스와이프 제스처를 위한 스타일 */
        .swipe-transition {
            transition: transform 0.3s ease-out;
        }
        
        /* Screen reader only content */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
        
        .focus\:not-sr-only:focus {
            position: absolute;
            width: auto;
            height: auto;
            padding: 0.5rem 1rem;
            margin: 0;
            overflow: visible;
            clip: auto;
            white-space: normal;
        }
        
        /* 모바일 최적화 추가 스타일 */
        @media (max-width: 640px) {
            /* 더 부드러운 스크롤 */
            * {
                scroll-behavior: smooth;
            }
            
            /* 입력창 그림자 강화 */
            #chat-ui .mt-2.flex.items-center {
                box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.08);
            }
            
            /* 메시지 간격 조정 */
            #chat-messages {
                padding: 1rem 0.75rem;
                padding-bottom: 90px;
            }
            
            /* 버튼 호버 효과 제거 (터치 디바이스) */
            @media (hover: none) {
                button:hover {
                    transform: none;
                }
            }
        }
    </style>
  <script type="module" crossorigin src="/assets/main.DyF4EjZl.js"></script>
  <link rel="modulepreload" crossorigin href="/assets/monitoring.DUFPKEQd.js">
  <link rel="modulepreload" crossorigin href="/assets/utils.BexnJh3b.js">
  <link rel="modulepreload" crossorigin href="/assets/components.B5NkJSc2.js">
  <link rel="modulepreload" crossorigin href="/assets/chat.N-a1COWu.js">
  <link rel="modulepreload" crossorigin href="/assets/app.z-Vl6oWH.js">
  <link rel="stylesheet" crossorigin href="/assets/app.CPLjii5T.css">
  <link rel="stylesheet" crossorigin href="/assets/main.0-5tNzfl.css">
  <script type="module">import.meta.url;import("_").catch(()=>1);(async function*(){})().next();window.__vite_is_modern_browser=true</script>
  <script type="module">!function(){if(window.__vite_is_modern_browser)return;console.warn("vite: loading legacy chunks, syntax error above and the same error below should be ignored");var e=document.getElementById("vite-legacy-polyfill"),n=document.createElement("script");n.src=e.src,n.onload=function(){System.import(document.getElementById('vite-legacy-entry').getAttribute('data-src'))},document.body.appendChild(n)}();</script>
</head>
<body class="flex items-center justify-center min-h-screen p-2 sm:p-4">
    <!-- Skip Links for Accessibility -->
    <a href="#chat-input" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-blue-500 text-white px-4 py-2 rounded-lg" data-i18n="a11y.skipToInput">채팅 입력으로 건너뛰기</a>
    <a href="#chat-messages" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-48 bg-blue-500 text-white px-4 py-2 rounded-lg" data-i18n="a11y.skipToMessages">채팅 메시지로 건너뛰기</a>
    <!-- Settings Modal -->
    <div id="settings-modal" class="hidden fixed inset-0 bg-black/30 flex items-center justify-center p-4 z-50" role="dialog" aria-modal="true" aria-labelledby="settings-title">
        <div class="glass-effect w-full max-w-lg rounded-2xl shadow-lg p-6 border-none">
            <div class="flex justify-between items-center mb-4">
                <h2 id="settings-title" class="text-xl font-bold text-slate-800" data-i18n="settings.title">AI 페르소나 설정</h2>
                <button id="close-persona-button" class="text-slate-500 hover:text-slate-800 text-3xl leading-none" aria-label="설정 창 닫기" data-i18n-aria="a11y.settingsClose">&times;</button>
            </div>
            <p id="persona-description" class="text-sm text-slate-600 mb-4" data-i18n="settings.description">AI의 이름, 성격, 말투 등을 자유롭게 설정하여 나만의 AI를 만들어보세요.
                페라는 세계에서 가장 빠르고 똑똑한 ai 모델입니다.
            </p>
            <textarea id="persona-input" class="w-full h-40 p-3 bg-white/70 rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none transition text-sm" placeholder="AI의 페르소나를 입력하세요..." aria-label="AI 페르소나 입력란" aria-describedby="persona-description" data-i18n="settings.placeholder"></textarea>
            
            <!-- 숨겨진 시스템 설정 (사용자에게 보이지 않음) -->
            <input type="hidden" id="hidden-persona" value="" />
            
            <div class="flex justify-end mt-4">
                <button id="save-persona-button" class="bg-blue-500 text-white px-5 py-2 rounded-lg font-semibold hover:bg-blue-600 transition-colors shadow-md" data-i18n="settings.save">저장</button>
            </div>
        </div>
    </div>

    <div class="w-full max-w-4xl h-[95vh] md:h-[85vh] glass-effect rounded-3xl shadow-2xl shadow-blue-100/50 flex flex-col">
        <!-- Header -->
        <header id="main-header" class="p-4 flex-shrink-0 border-b border-white/20 flex justify-between items-center transition-transform duration-300" role="banner">
            <a href="./" style="text-decoration: none; color: inherit;"><h1 class="text-xl font-bold text-slate-800">FERA</h1></a>
            <div class="flex items-center bg-white/40 rounded-full p-1 space-x-1" role="tablist" aria-label="탭 선택">
                <button id="chat-tab-button" class="tab-button bg-white text-blue-600 px-4 py-1.5 rounded-full text-sm font-semibold shadow-sm transition-all duration-300" role="tab" aria-selected="true" aria-controls="chat-ui" tabindex="0" data-i18n="tab.chat">채팅</button>
                <button id="image-tab-button" class="tab-button text-slate-600 px-4 py-1.5 rounded-full text-sm font-semibold transition-all duration-300" role="tab" aria-selected="false" aria-controls="image-ui" tabindex="0" data-i18n="tab.image">이미지 생성</button>
                <div class="w-px h-5 bg-slate-300/70 mx-1"></div>
                <button id="download-button" class="text-slate-600 hover:text-slate-800 transition-colors w-9 h-9 flex items-center justify-center rounded-full hover:bg-white/50" title="앱 다운로드" aria-label="앱 다운로드" tabindex="0">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 15 17 10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                    </svg>
                </button>
                <button id="theme-toggle" class="text-slate-600 hover:text-slate-800 transition-colors w-9 h-9 flex items-center justify-center rounded-full hover:bg-white/50" title="테마 변경" aria-label="테마 변경" tabindex="0">
                    <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
                    <svg class="moon-icon hidden" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
                </button>
                <button id="settings-button" class="text-slate-600 hover:text-slate-800 transition-colors w-9 h-9 flex items-center justify-center rounded-full hover:bg-white/50" aria-label="설정" data-i18n-aria="header.settings" tabindex="0">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>
                </button>
            </div>
        </header>

        <!-- Main Content Wrapper -->
        <main class="flex-1 relative" role="main">
            <!-- Chatbot UI -->
            <div id="chat-ui" class="content-pane is-active flex flex-col h-full" role="tabpanel" aria-labelledby="chat-tab-button" tabindex="0">
                <div id="chat-messages" class="flex-1 overflow-y-auto p-4 space-y-4" role="log" aria-live="polite" aria-label="채팅 메시지" data-i18n-aria="a11y.chatMessages">
                    <div id="initial-message" class="flex items-start gap-3 max-w-lg message-bubble">
                        <div class="w-9 h-9 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center text-white font-bold text-base flex-shrink-0 shadow-md" role="img" aria-label="AI 아바타" data-i18n-aria="a11y.aiAvatar">AI</div>
                        <div class="bg-white/80 rounded-2xl rounded-tl-none p-3.5 text-sm text-slate-800 shadow-sm">
                            <p data-i18n="chat.initialMessage">안녕하세요, FERA입니다. 무엇이든 가능합니다.</p>
                        </div>
                    </div>
                </div>
                <!-- *** 수정된 부분: 파일 미리보기 UI *** -->
                <div id="file-preview-container" class="px-2">
                    <div class="glass-effect rounded-full inline-flex items-center p-1.5 pl-3 border-none">
                        <div id="preview-content" class="flex items-center gap-2">
                            <img id="preview-image" src="" class="h-8 w-8 rounded-full object-cover hidden">
                            <svg id="preview-pdf-icon" class="w-6 h-6 text-red-500 flex-shrink-0 hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zM9 17v-2h6v2H9zm6-5H9v-2h6v2z"/></svg>
                            <span id="preview-filename" class="text-sm text-slate-700 font-medium truncate max-w-[200px] sm:max-w-xs"></span>
                            <span id="preview-filesize" class="text-xs text-slate-500 ml-1"></span>
                        </div>
                        <button id="remove-preview-button" class="ml-2 bg-slate-500/50 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold hover:bg-slate-600/70 flex-shrink-0" aria-label="첨부 파일 제거" data-i18n-aria="a11y.removeFile">&times;</button>
                    </div>
                </div>
                <!-- Chat Input -->
                <div class="mt-2 flex items-center gap-2 sm:gap-3 flex-shrink-0">
                    <input type="file" id="file-input" class="hidden" accept="image/*,application/pdf">
                    <button id="file-button" class="bg-white/70 text-slate-500 w-10 h-10 sm:w-11 sm:h-11 rounded-full hover:bg-white transition-colors flex items-center justify-center flex-shrink-0" aria-label="파일 업로드" data-i18n-aria="a11y.fileUpload">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.59a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg>
                    </button>
                    <input type="text" id="chat-input" class="flex-1 p-3 bg-white/80 border border-white/40 rounded-full focus:ring-2 focus:ring-blue-400 focus:outline-none transition placeholder:text-slate-500 min-w-0 shadow-inner shadow-black/5" placeholder="메시지를 입력하세요" aria-label="채팅 메시지 입력" data-i18n="chat.placeholder">
                    <button id="send-button" class="bg-blue-500 text-white w-10 h-10 sm:w-11 sm:h-11 rounded-full font-semibold hover:bg-blue-600 transition-colors disabled:bg-slate-400 flex items-center justify-center flex-shrink-0 shadow-lg" aria-label="메시지 전송" data-i18n-aria="a11y.messageSend" tabindex="0">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
                    </button>
                </div>
            </div>

            <!-- Image Generation UI -->
            <div id="image-ui" class="content-pane hidden flex-col items-center justify-center h-full p-4 md:p-6" role="tabpanel" aria-labelledby="image-tab-button" tabindex="0">
                 <div class="w-full max-w-2xl text-center">
                    <h2 class="text-3xl font-bold text-slate-800 mb-2" data-i18n="tab.image"> 이미지 생성</h2>
                    <p class="text-slate-500 mb-8">생성하고 싶은 이미지에 대한 설명을 입력해주세요.</p>
                    <div class="flex items-center gap-3 mb-6">
                        <input type="text" id="image-prompt" class="flex-1 p-3 bg-white/80 border border-white/40 rounded-full focus:ring-2 focus:ring-indigo-400 focus:outline-none transition placeholder:text-slate-500 min-w-0 shadow-inner shadow-black/5" placeholder="생성할 이미지를 설명해주세요..." data-i18n="image.placeholder">
                        <button id="generate-image-button" class="bg-indigo-500 text-white px-6 py-3 rounded-full font-semibold hover:bg-indigo-600 transition-colors disabled:bg-slate-400 shadow-lg flex-shrink-0" data-i18n="image.generate">
                            생성하기
                        </button>
                    </div>
                    <div class="w-full max-w-2xl mx-auto">
                        <div id="image-display-wrapper" class="relative w-full bg-black/5 rounded-2xl border-2 border-dashed border-white/30 overflow-hidden" style="padding-top: 56.25%;">
                            <div id="image-result-container" class="absolute inset-0 flex items-center justify-center">
                               <div id="image-placeholder" class="text-slate-500 transition-opacity duration-300">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="mx-auto mb-2 lucide lucide-image"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg>
                                    이미지가 여기에 표시됩니다.
                                </div>
                               <div id="image-loader" class="hidden spinner"></div>
                               <img id="generated-image" src="" alt="Generated Image" class="hidden absolute inset-0 w-full h-full object-contain" loading="lazy"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- PDF.js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
    
    <!-- PDF.js Configuration -->
    <script>
        // Configure PDF.js worker
        if (typeof pdfjsLib !== 'undefined') {
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js';
        }
    </script>
    
    <!-- Main application module -->
  <script nomodule>!function(){var e=document,t=e.createElement("script");if(!("noModule"in t)&&"onbeforeload"in t){var n=!1;e.addEventListener("beforeload",(function(e){if(e.target===t)n=!0;else if(!e.target.hasAttribute("nomodule")||!n)return;e.preventDefault()}),!0),t.type="module",t.src=".",e.head.appendChild(t),t.remove()}}();</script>
  <script nomodule crossorigin id="vite-legacy-polyfill" src="/assets/polyfills-legacy.ygdoaGMj.js"></script>
  <script nomodule crossorigin id="vite-legacy-entry" data-src="/assets/main-legacy.BMuvJND4.js">System.import(document.getElementById('vite-legacy-entry').getAttribute('data-src'))</script>
</body>
</html>